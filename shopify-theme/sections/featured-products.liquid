{% comment %}
  Featured Products Section
{% endcomment %}

<section class="products-section" id="products-{{ section.id }}">
  <div class="container">
    {%- if section.settings.heading != blank -%}
      <h2 class="section-title">{{ section.settings.heading }}</h2>
    {%- endif -%}
    
    {%- if section.settings.subheading != blank -%}
      <p class="section-subtitle">{{ section.settings.subheading }}</p>
    {%- endif -%}
    
    <div class="products-grid" data-products-grid>
      {%- assign collection = collections[section.settings.collection] -%}
      {%- if collection != blank -%}
        {%- for product in collection.products limit: section.settings.products_to_show -%}
          {% render 'product-card',
            product: product,
            show_vendor: section.settings.show_vendor,
            show_rating: section.settings.show_rating,
            show_quick_add: section.settings.show_quick_add
          %}
        {%- endfor -%}
      {%- else -%}
        {%- for product in section.settings.product_list -%}
          {% render 'product-card',
            product: product,
            show_vendor: section.settings.show_vendor,
            show_rating: section.settings.show_rating,
            show_quick_add: section.settings.show_quick_add
          %}
        {%- endfor -%}
      {%- endif -%}
    </div>
    
    {%- if section.settings.show_view_all -%}
      <div class="section-footer">
        <a href="{{ collection.url | default: '/collections/all' }}" class="btn">
          {{ section.settings.view_all_text }}
        </a>
      </div>
    {%- endif -%}
  </div>
</section>

<style>
  #products-{{ section.id }} {
    padding: {{ section.settings.padding_top }}rem 0 {{ section.settings.padding_bottom }}rem;
    background: {{ section.settings.background_color | default: settings.secondary_color }};
    position: relative;
  }

  .products-grid {
    display: grid;
    grid-template-columns: repeat({{ section.settings.products_per_row }}, 1fr);
    gap: 2rem;
  }

  .section-footer {
    text-align: center;
    margin-top: 3rem;
  }

  @media (max-width: 1200px) {
    .products-grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  @media (max-width: 768px) {
    .products-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
    }
  }

  @media (max-width: 480px) {
    .products-grid {
      grid-template-columns: 1fr;
    }
  }
</style>

{% schema %}
{
  "name": "Featured Products",
  "tag": "section",
  "class": "section-featured-products",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Featured Dog Products"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "Handpicked for your furry friend's happiness"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection",
      "info": "Choose a collection to display products from"
    },
    {
      "type": "product_list",
      "id": "product_list",
      "label": "Products",
      "info": "Select specific products if no collection is chosen"
    },
    {
      "type": "range",
      "id": "products_to_show",
      "min": 2,
      "max": 12,
      "step": 1,
      "label": "Number of products to show",
      "default": 8
    },
    {
      "type": "range",
      "id": "products_per_row",
      "min": 2,
      "max": 5,
      "step": 1,
      "label": "Products per row",
      "default": 4
    },
    {
      "type": "checkbox",
      "id": "show_vendor",
      "label": "Show vendor",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "show_rating",
      "label": "Show product rating",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "show_quick_add",
      "label": "Enable quick add button",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_view_all",
      "label": "Show 'View all' button",
      "default": true
    },
    {
      "type": "text",
      "id": "view_all_text",
      "label": "'View all' button text",
      "default": "View All Products"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 10,
      "step": 0.5,
      "unit": "rem",
      "label": "Padding top",
      "default": 6
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 10,
      "step": 0.5,
      "unit": "rem",
      "label": "Padding bottom",
      "default": 6
    }
  ],
  "presets": [
    {
      "name": "Featured Products",
      "category": "Product"
    }
  ]
}
{% endschema %}